<html>
<head>
  <title>2.5.2 create-react-app 全大大</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win32);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1890"/>
<h1>2.5.2 create-react-app 全大大</h1>

<div>
<span><div><img src="2.5.2 create-react-app 全大大_files/Image.png" type="image/png" style="height: auto;"/></div><div><br/></div><div><br/></div><div><hr/></div><div>结构：</div><div><img src="2.5.2 create-react-app 全大大_files/Image [1].png" type="image/png" style="height: auto;"/></div><div><br/></div><div>src:</div><div><img src="2.5.2 create-react-app 全大大_files/Image [2].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><br/></div><div><br/></div><div><hr/></div><div>结构分析：</div><div><br/></div><div><b>src/index.js</b></div><div>ReactDOM.render（&lt;组件名 /&gt;,在哪个DOM元素显示组件）</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>import React from 'react';</div><div>import ReactDOM from 'react-dom';</div><div>import './index.css';</div><div>import App from './App';</div><div><span style="color: rgb(147, 150, 0);">import registerServiceWorker from './registerServiceWorker';//不用关心，单纯提高网页加载速度用的。</span></div><div><br/></div><div><span style="color: rgb(227, 0, 0);"><b>ReactDOM.render(&lt;App /&gt;, document.getElementById('root'));</b></span></div><div>registerServiceWorker();</div></div><div><br/></div><div><br/></div><div><br/></div><div>root在 <b>public/index.html</b>里</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;div id=&quot;root&quot;&gt; &lt;div/&gt;</div></div><div><br/></div><div><br/></div><div><b>src/app.js    <span style="color: rgb(45, 79, 201);"><u>父</u></span></b><span style="color: rgb(45, 79, 201);"><u>传子</u></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div><span style="color: rgb(227, 0, 0);">import React, {Component} from 'react';</span></div><div>import './app.css';  //引入css样式</div><div>import Header from './components/Header';</div><div><br/></div><div><span style="color: rgb(227, 0, 0);">// 创造组件</span></div><div><span style="color: rgb(227, 0, 0);">// 组件名首字母必须<b>大写</b></span></div><div><span style="color: rgb(227, 0, 0);">class <b>App</b> extends Component {</span></div><div>  constructor() {</div><div>    super(); // ES6继承以后，必须在第一句调用父类构造器super()</div><div>    //this.sayHi = this.sayHi.bind(this);</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">sayHi(</span>username) {   //方法直接写</div><div>    alert(&quot;hi &quot; + username);</div><div>    console.log(this);</div><div>  }</div><div>  <b><span style="color: rgb(227, 0, 0);">render() {</span></b></div><div>    var arr = [&quot;QQ&quot;, &quot;Q7&quot;, &quot;WEY5&quot;, &quot;众泰&quot;, &quot;QQ&quot;];  //下面也可以写{}</div><div>    var pp = &lt;p&gt;崔老师是东北男人的典范，钱包必须没钱！&lt;/p&gt;;</div><div>    var divData = &lt;div&gt;div数据&lt;/div&gt;;</div><div>    <b><span style="color: rgb(227, 0, 0);">return (</span></b></div><div>      <span style="color: rgb(227, 0, 0);">&lt;div <b>className</b>=&quot;app&quot;&gt;</span>   <span style="color: rgb(227, 0, 0);">//一个顶层元素</span></div><div>        &lt;Header <span style="color: rgb(45, 79, 201);"><b><u>tt=&quot;xxx&quot;</u>  arrayData={arr}</b></span>&gt;&lt;/Header&gt;</div><div>        &lt;h1&gt;hello world&lt;/h1&gt;</div><div>        &lt;p&gt;今天天气不那么冷&lt;/p&gt;</div><div>        &lt;input type=&quot;checkbox&quot; id=&quot;sex&quot; value=&quot;man&quot; /&gt;</div><div>        &lt;label htmlFor=&quot;sex&quot; &gt;男&lt;/label&gt;</div><div>        &lt;button <span style="color: rgb(227, 0, 0);"><b>onClick</b>=<b>{</b>this.sayHi.bind(this, &quot;男神崔&quot;)<b>}</b></span>&gt;测试&lt;/button&gt;</div><div>        &lt;ul&gt;</div><div>          <span style="color: rgb(227, 0, 0);">{</span></div><div><span style="color: rgb(227, 0, 0);">            arr</span>.map(function(item, index){</div><div>              <b>return</b> &lt;li key=<u>{index}</u>&gt;<u>{item}</u>&lt;/li&gt;;</div><div>            })</div><div>          <span style="color: rgb(227, 0, 0);">}</span></div><div>        &lt;/ul&gt;</div><div>      <span style="color: rgb(227, 0, 0);">&lt;/div&gt;</span></div><div>    <span style="color: rgb(227, 0, 0);">)</span></div><div>  <span style="color: rgb(227, 0, 0);">}</span></div><div><span style="color: rgb(227, 0, 0);">}</span></div><div><br/></div><div><span style="color: rgb(227, 0, 0);">export default App;</span></div></div><div><br/></div><div><br/></div><div><b>src/component/Header.js</b>   <span style="color: rgb(45, 79, 201);"><u>父传<b>子，子接收</b></u></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>import React, {Component} from 'react';</div><div>import PropTypes from 'prop-types';</div><div><br/></div><div>export default class Header extends Component {</div><div>    render() {</div><div>        return (</div><div>            &lt;div&gt;</div><div>                &lt;h1&gt;<span style="color: rgb(45, 79, 201);"><u><b>{this.props.tt}</b></u></span>&lt;/h1&gt;</div><div>                {this.props.arrayData.length}</div><div>                {this.props.ppData}</div><div>                &lt;hr/&gt;</div><div>                {this.props.ddData}</div><div>                {this.props<span style="color: rgb(227, 0, 0);"><b>.children</b></span>}</div><div>            &lt;/div&gt;</div><div>        )</div><div>    }</div><div>}</div><div><br/></div><div><span style="color: rgb(227, 0, 0);">Header.<b>propTypes</b> = {    //校验</span></div><div><span style="color: rgb(227, 0, 0);">    tt: PropTypes.string</span></div><div><span style="color: rgb(227, 0, 0);">}</span></div></div><div><br/></div><div><br/></div><div><hr/></div><div><br/></div><div><b>src/list.js    <span style="color: rgb(227, 0, 0);">this.setState  &amp; ref</span></b></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>import React, {Component} from 'react';</div><div><br/></div><div>class List extends Component{</div><div>  constructor() {</div><div>    super();</div><div>    <span style="color: rgb(227, 0, 0);">this.state = {</span></div><div><span style="color: rgb(227, 0, 0);">      list: []</span></div><div><span style="color: rgb(227, 0, 0);">    };</span></div><div>    this.addTodo = this.addTodo.bind(this);</div><div>  }</div><div>  addTodo(data) {</div><div>    <span style="color: rgb(227, 0, 0);">this.state.list.push(data);</span></div><div>    console.log(this.state.list);</div><div>    <b><span style="color: rgb(227, 0, 0);">// 必须调用setState页面才会刷新!!!!!</span></b></div><div><span style="color: rgb(227, 0, 0);"><b>    this.setState({</b></span></div><div><span style="color: rgb(227, 0, 0);">      list: this.state.list</span></div><div><span style="color: rgb(227, 0, 0);">    })</span></div><div>  }</div><div>  render() {</div><div>    return (</div><div>      &lt;div&gt;</div><div>        &lt;input type=&quot;text&quot; <b><span style="color: rgb(227, 0, 0);">ref=&quot;ipt&quot;</span></b> /&gt;</div><div>        &lt;input type=&quot;button&quot; value=&quot;add todo&quot; onClick={()=&gt;{</div><div>          this.addTodo(<b><span style="color: rgb(227, 0, 0);">this.refs.ipt.value</span></b>)}} /&gt;</div><div>        &lt;ul&gt;</div><div>        {</div><div>          this.state.list.map((item, index)=&gt;{</div><div>            return (</div><div>              &lt;li key={index}&gt;{item}&lt;/li&gt;</div><div>            );</div><div>          })</div><div>        }</div><div>        &lt;/ul&gt;</div><div>      &lt;/div&gt;</div><div>    )</div><div>  }</div><div>}</div><div><br/></div><div>export default List;</div></div><div><br/></div><div><hr/></div><div><img src="2.5.2 create-react-app 全大大_files/Image [3].png" type="image/png"/></div><div><span style="color: rgb(227, 0, 0);"><b>子</b>传父</span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>import React, {Component} from 'react';</div><div><br/></div><div>class ChildInputForm extends Component{</div><div>  constructor() {</div><div>    super();</div><div>    console.log(&quot;构造器&quot;);</div><div>  }</div><div>  render() {</div><div>    return (</div><div>      &lt;div&gt;</div><div>          &lt;input type=&quot;text&quot; ref=&quot;ipt&quot; /&gt;</div><div>          &lt;button <span style="color: rgb(227, 0, 0);">onClick={()=&gt;{this.props.ttt(this.refs.ipt.value)</span>}}&gt;send value&lt;/button&gt;</div><div>      &lt;/div&gt;</div><div>    )</div><div>  }</div><div>}</div><div><br/></div><div>export default ChildInputForm;</div></div><div><br/></div><div><span style="color: rgb(227, 0, 0);">子传<b>父</b></span></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>import React, { Component } from 'react';</div><div><u>import ChildInputForm from './ChildInputForm';</u></div><div><br/></div><div>class App extends Component {</div><div>  constructor() {</div><div>    super();</div><div>    <span style="color: rgb(227, 0, 0);">this.state = {</span></div><div><span style="color: rgb(227, 0, 0);">      iptValue: &quot;&quot;,</span></div><div>    }</div><div>    <u>this.changeIpt = this.changeIpt.bind(this);</u></div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">changeIpt(newVal) {</span></div><div><span style="color: rgb(227, 0, 0);">    this.setState({</span></div><div><span style="color: rgb(227, 0, 0);">      iptValue: newVal</span></div><div><span style="color: rgb(227, 0, 0);">    })</span></div><div><span style="color: rgb(227, 0, 0);">  }</span></div><div>  render() {</div><div>    return (</div><div>      &lt;div&gt;</div><div>         <span style="color: rgb(227, 0, 0);"> &lt;ChildInputForm ttt={this.changeIpt}/&gt;</span> </div><div>      &lt;/div&gt;</div><div>    )</div><div>  }</div><div>}</div><div><br/></div><div>export default App;</div></div><div><br/></div><div><hr/></div><div><br/></div><div>生命周期</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>import React, {Component} from 'react';</div><div><br/></div><div>class ChildInputForm extends Component{</div><div>  <b>constructor</b>() {</div><div>    super();</div><div>    console.log(&quot;构造器&quot;);</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">componentWillMount</span>() {</div><div>    console.log(&quot;即将进入dom&quot;);</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">componentDidMount</span>() {</div><div>    console.log(&quot;已经进入dom&quot;);</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">componentWillReceiveProps</span>() {</div><div>    console.log(&quot;componentWillReceiveProps&quot;);</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">shouldComponentUpdate</span>(nextProp, nextState) {</div><div>    console.log(&quot;是否允许更新&quot;, this.props, nextProp);</div><div>    if(this.props.ttvalue != nextProp.ttvalue) {</div><div>      return <span style="color: rgb(227, 0, 0);">false</span>;</div><div>    }</div><div>    return <span style="color: rgb(227, 0, 0);">true</span>;</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">componentWillUpdate</span>() {</div><div>    console.log(&quot;即将更新&quot;);</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">componentDidUpdate</span>() {</div><div>    console.log(&quot;已经更新&quot;);</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">componentWillUnmount</span>() {</div><div>    console.log(&quot;即将卸载&quot;);</div><div>  }</div><div>  <span style="color: rgb(227, 0, 0);">render</span>() {</div><div>    console.log(&quot;render&quot;);</div><div>    return (</div><div>      &lt;div&gt;</div><div>          &lt;input type=&quot;text&quot; ref=&quot;ipt&quot; /&gt;</div><div>          &lt;button onClick={()=&gt;{this.props.ttt(this.refs.ipt.value)}}&gt;send value&lt;/button&gt;</div><div>      &lt;/div&gt;</div><div>    )</div><div>  }</div><div>}</div><div><br/></div><div>export default ChildInputForm;</div></div><div><br/></div><div><br/></div><div>卸载组件</div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>import React, { Component } from 'react';</div><div>import ChildInputForm from './ChildInputForm';</div><div><br/></div><div>function proess() {</div><div>  return &lt;div&gt;这是外部处理完成以后的结果&lt;/div&gt;;</div><div>}</div><div><br/></div><div>class App extends Component {</div><div>  constructor() {</div><div>    super();</div><div>    this.state = {</div><div>      iptValue: &quot;&quot;,</div><div>      nanshencui: &quot;崔男神&quot;,</div><div>      deleteFlag: false</div><div>    }</div><div>    this.changeIpt = this.changeIpt.bind(this);</div><div>  }</div><div>  changeIpt(newVal) {</div><div>    this.setState({</div><div>      iptValue: newVal</div><div>    })</div><div>  }</div><div>  render() {</div><div>    <span style="color: rgb(227, 0, 0);">var iptC = &lt;ChildInputForm ttt={this.changeIpt} ttvalue={this.state.nanshencui} /&gt;;</span></div><div>    if (<span style="color: rgb(227, 0, 0);">this.state.deleteFlag) {</span></div><div><span style="color: rgb(227, 0, 0);">      iptC = null;</span></div><div>    }</div><div>    return (</div><div>      &lt;div&gt;</div><div>        &lt;button onClick={() =&gt; {</div><div>        this.setState({</div><div>          nanshencui: &quot;CSS&quot;</div><div>        })</div><div>      }}&gt;修改男神崔&lt;/button&gt;</div><div>        &lt;button onClick={() =&gt; {</div><div>        this.setState({</div><div>          deleteFlag: true</div><div>        })</div><div>      }}&gt;卸载组件&lt;/button&gt;</div><div>        {iptC}</div><div>        {this.state.iptValue}</div><div>        {proess()}</div><div>      &lt;/div&gt;</div><div>    )</div><div>  }</div><div>}</div><div><br/></div><div>export default App;</div></div><div><br/></div><div><br/></div><div><hr/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 