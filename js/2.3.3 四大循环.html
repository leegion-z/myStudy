<html>
<head>
  <title>2.3.3 四大循环</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win32);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1499"/>
<h1>2.3.3 四大循环</h1>

<div>
<span><div><a href="http://www.php.cn/js-tutorial-382288.html">http://www.php.cn/js-tutorial-382288.html</a></div><div><br/></div><div><br/></div><div>简单 for 循环</div><div><br/></div><div><hr/></div><div><br/></div><div><b>for</b> ( data  <b>in  </b>xxx )</div><div>循环遍历的是对象的属性，而不是数组的索引。因此， for-in 遍历的对象便不局限于数组，还<b>可以遍历对象</b>。</div><div><br/></div><div>每次迭代操作会<b>同时搜索实例或者原型属性</b>， for-in 循环的每次迭代都会<b>产生更多开销</b>，因此要比其他循环类型慢，除非明确需要迭代一个<b>属性数量未知的对象</b>，否则应避免使用 for-in 循环</div><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>const person = {</div><div>    fname: &quot;san&quot;,</div><div>    lname: &quot;zhang&quot;,</div><div>    age: 99};</div><div><b>for(info in person)</b> {   </div><div>     console.log(&quot;person[&quot; + info + &quot;] = &quot; + person[info]);</div><div>}</div></div><div><br/></div><div><br/></div><div><hr/></div><div><br/></div><div><br/></div><div><b>forEach</b></div><div><b><br/></b></div><div><b><br/></b></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>const arr = [1, 2, 3];</div><div>arr.forEach(</div><div>     (data) =&gt; { console.log(data);</div><div>});</div></div><div><b><br/></b></div><div>forEach 方法为数组中含有有效值的每一项执行一次 <b>callback 函数,</b>callback 函数会被依次传入三个参数：</div><div>     - 数组当前项的值；</div><div>     - 数组当前项的索引；</div><div>     - 数组对象本身；</div><div><b><br/></b></div><div><b>另外，forEach 将会遍历数组中的所有元素，但是 ES5 定义了一些其他有用的方法，下面是一部分：</b></div><div><b><br/></b></div><div><b>- every: 循环在第一次 return false 后返回</b></div><div><b><br/></b></div><div><b>- some: 循环在第一次 return true 后返回</b></div><div><b><br/></b></div><div><b>- filter: 返回一个新的数组，该数组内的元素满足回调函数</b></div><div><b><br/></b></div><div><b>- map: 将原数组中的元素处理后再返回</b></div><div><b><br/></b></div><div><b>- reduce: 对数组中的元素依次处理，将上次处理结果作为下次处理的输入，最后得到最终结果。</b></div><div><b><br/></b></div><div><b><br/></b></div><div><hr/></div><div><b><br/></b></div><div><b>for</b> ( data <b>of</b> xxx )  <b>es6</b></div><div><b><br/></b></div><div><b>why：</b></div><div>forEach 不能 break 和 return</div><div>for-in 缺点更加明显，它不仅遍历数组中的元素，还会遍历自定义的属性，甚至原型链上的属性都被访问到。而且，<b>遍历数组元素的顺序可能是随机的</b>。</div><div><br/></div><div><br/></div><div><ul style="margin: 0px; padding: 0px; list-style: none; color: rgb(51, 51, 51); font-family: &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, &quot;ST HeiTi&quot;, &quot;microsoft yahei&quot;, 微软雅黑, tahoma, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="margin: 0px 0px 1em; padding: 0px;">跟 forEach 相比，可以正确响应 break, continue, return。</li><li style="margin: 0px 0px 1em; padding: 0px;">for-of 循环不仅支持数组，还支持大多数类数组对象，例如 DOM nodelist 对象。</li><li style="margin: 0px 0px 1em; padding: 0px;">for-of 循环也支持字符串遍历，它将字符串视为一系列 Unicode 字符来进行遍历。</li><li style="margin: 0px 0px 1em; padding: 0px;">for-of 也支持 Map 和 Set （两者均为 ES6 中新增的类型）对象遍历。</li></ul><p style="margin: 0px 0px 1em; padding: 0px; color: rgb(51, 51, 51); font-family: &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, &quot;ST HeiTi&quot;, &quot;microsoft yahei&quot;, 微软雅黑, tahoma, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;">总结一下，for-of 循环有以下几个特征：</p><ul style="margin: 0px; padding: 0px; list-style: none; color: rgb(51, 51, 51); font-family: &quot;helvetica neue&quot;, &quot;hiragino sans gb&quot;, &quot;ST HeiTi&quot;, &quot;microsoft yahei&quot;, 微软雅黑, tahoma, sans-serif; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial;"><li style="margin: 0px 0px 1em; padding: 0px;">这是最简洁、最直接的遍历数组元素的语法。</li><li style="margin: 0px 0px 1em; padding: 0px;">这个方法避开了 for-in 循环的所有缺陷。</li><li style="margin: 0px 0px 1em; padding: 0px;">与 forEach 不同的是，它可以正确响应 break、continue 和 return 语句。</li><li style="margin: 0px 0px 1em; padding: 0px;">其不仅可以遍历数组，还可以遍历类数组对象和其他可迭代对象。</li></ul><div style="margin: 0px 0px 1em; padding: 0px; color: rgb(51, 51, 51); font-family: 'helvetica neue', 'hiragino sans gb', 'ST HeiTi', 'microsoft yahei', 微软雅黑, tahoma, sans-serif; font-size: 16px; font-style: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255);"><div>但需要注意的是，for-of循环不支持普通对象，但如果你想迭代一个对象的属性，你可以用 for-in 循环（这也是它的本职工作）。</div></div></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div><div><b><br/></b></div></span>
</div></body></html> 