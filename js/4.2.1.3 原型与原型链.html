<html>
<head>
  <title>4.2.1.3 原型与原型链</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win32);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1333"/>
<h1>4.2.1.3 原型与原型链</h1>

<div>
<span><div>    //让<span style="font-weight: bold;">构造函数中的方法</span>在<span style="font-weight: bold;">内存</span>中存在<span style="font-weight: bold;">一</span>份，因为<span style="font-weight: bold;">方法</span>长的是<span style="font-weight: bold;">一样</span>的。这样就可以<span style="font-weight: bold;">提升性能</span>。</div><div><br/></div><div>   <b> //原型：让方法在内存中存在一份，提升性能。</b></div><div><b><br/></b></div><div><b>    //原型对象：<font style="color: rgb(123, 0, 61);">构造函数.prototype</font>，原型对象下可以添加共享的属性和方法。</b></div><div><b><br/></b></div><div><b><br/></b></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div>    function CreatePerson(name){</div><div>        this.name = name;</div><div>    }</div><div>    CreatePerson.prototype.showName = function(){</div><div>        console.log(this.name);</div><div>    };</div><div><br/></div><div>    var p1 = new CreatePerson('小明');</div><div>    var p2 = new CreatePerson('小白');</div><div>    console.log(  p1.showName == p2.showName  );  // true</div></div><div>   </div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><br style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">   function 构造函数( ){                       </span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">        对象.属性1 = 1;                          </span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">        对象.属性2 = 2;                          </span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">    }                                                   </span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">    构造函数.原型.方法1 = function(){};</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">    构造函数.原型.方法2 = function(){};</span></div><div><br style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">    var 对象 = new 构造函数();            </span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">    对象.属性1                                    </span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">    对象.方法2();                                </span></div></div><div><hr/><br/></div><div><br/></div><div style="box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;-en-codeblock:true;"><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><b>//原型链</b>：<b>就近</b>进行<b>查找</b>，如果没找到，就继续通过原型链向外查找。如果原型链上没有找到对应的属性或方法，就返回undefined</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><hr/><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><span>    </span>function Foo(){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        this.name = 'hello';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    Foo.prototype.name = 'hi';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    var obj1 = new Foo();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    console.log( obj1.name );  //hello</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><hr/><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    </span><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">function Foo(){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        //this.name = 'hello';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    Foo.prototype.name = 'hi';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    var obj1 = new Foo();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    console.log( obj1.name );  //hi</span></div><div><br/></div><div><img src="4.2.1.3 原型与原型链_files/Image.png" type="image/png" style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"/></div><div><br/></div><div><hr/><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);"><br/></span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    function Foo(){</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">        this.name = 'hello';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    }</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    Foo.prototype.name = 'hi';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    Object.prototype.name = 'nihao';</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    //var obj1 = new Foo();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    //console.log( obj1.name );</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    //console.log( obj1.name );</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    //console.log( window );</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    var obj1 = new Foo();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    var obj2 = new Foo();</span></div><div><span style="font-family: Monaco; font-size: 9pt; color: rgb(51, 51, 51);">    var obj3 = new Foo();</span></div></div><div><br/></div><div><br/></div><div><br/></div><div><hr/><br/></div><div>//尽量让面向对象中的this指向对象</div><div>    function Drag(id){</div><div>        this.elem = document.getElementById(id);//在对象下的属性</div><div>        this.disX = 0;//this是在构造函数中写的，指的是对象</div><div>        this.disY = 0;</div><div>    }</div><div>    Drag.prototype.init = function(){  //初始化</div><div>        this.elem.onmousedown = this.down.bind(this);//赋值操作，把this.down赋值给前面， bind后的this指的是调用init的d1即对象就是构造函数Drag('div1');函数 就是对象；</div><div>    };//this在init中写的，看谁调用的init 是元素d1（ 构造函数返回的结果）    </div><div>    Drag.prototype.down = function(ev){  //按下操作</div><div>        this.disX = ev.pageX - this.elem.offsetLeft;</div><div>        //this属于down这个函数，他在楼上调用的，因为赋值操作所以这个this指的是this.elem,this.elem是元素 elem.divX必然报错 应该让this指向对象（事件）所以楼上加bind(this)</div><div>        this.disY = ev.pageY - this.elem.offsetTop;</div><div>        document.onmousemove = this.move.bind(this);</div><div>        document.onmouseup = this.up;</div><div>        return false;</div><div>    };</div><div>    Drag.prototype.move = function(ev){   //移动操作</div><div>        this.elem.style.left = ev.pageX - this.disX + 'px';</div><div>        this.elem.style.top = ev.pageY - this.disY + 'px';</div><div>    };</div><div>    Drag.prototype.up = function(){    //抬起操作</div><div>        document.onmousemove = null;</div><div>        document.onmouseup = null;</div><div>    };</div><div>    var d1 = new Drag('div1');</div><div>    d1.init();//初始化调用</div><div><br/></div></span>
</div></body></html> 