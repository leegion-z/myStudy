<html>
<head>
  <title>session cookie</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win32);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="743"/>
<h1>session cookie</h1>

<div>
<span><div><img src="session cookie_files/Image.png" type="image/png" style="height: auto;"/></div><div>session:存在服务器</div><div>cookie:存在本地</div><div><img src="session cookie_files/Image [1].png" type="image/png" style="height: auto;"/></div><div><br/></div><div>服务台的cookie:</div><div>name  value  domain</div><div><img src="session cookie_files/Image [2].png" type="image/png"/></div><div><hr/><div>浏览器关闭还在</div></div><div><img src="session cookie_files/Image [3].png" type="image/png" style="height: auto;"/></div><div><br/></div><div>设置存储</div><div>localStorage<span style="font-weight: bold;">.setItem(&quot;name&quot;,&quot;kerwin&quot; )</span></div><div><img src="session cookie_files/Image [4].png" type="image/png" style="font-weight: bold; height: auto;"/></div><div><br/></div><div>localStorage<span style="font-weight: bold;">.getItem(&quot;name&quot; )</span></div><div><br/></div><div>localStorage<span style="font-weight: bold;">.removeItem(&quot;name&quot; )</span></div><div><br/></div><div>localStorage<span style="font-weight: bold;">.clear( )</span></div><div><br/></div><div><hr/><div><br/></div></div><div>浏览器关闭消失  刷新不会消失  </div><div><img src="session cookie_files/Image [5].png" type="image/png" style="height: auto;"/></div><div><br/></div><div>sessionStorage<span style="font-weight: bold;">.setItem(&quot;name&quot;,&quot;kerwin&quot; )</span></div><div><img src="session cookie_files/Image [6].png" type="image/png" style="font-weight: bold; height: auto;"/></div><div><br/></div><div><br/></div><div>sessionStorage<span style="font-weight: bold;">.getItem(&quot;name&quot; )</span></div><div><br/></div><div>sessionStorage<span style="font-weight: bold;">.removeItem(&quot;name&quot; )</span></div><div><br/></div><div>sessionStorage<span style="font-weight: bold;">.clear( )</span></div><div><br/></div><div><br/></div><div><hr/><div><br/></div></div><div>兼容性问题：</div><div><a href="https://caniuse.com/">https://caniuse.com/</a></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><hr/></div><div><span style="font-weight: bold;">cookie</span>：</div><div>    存储在浏览器、容易过期、操作方式麻烦（document.cookie截取字符串）</div><div>    不可以跨域访问</div><div>    存储量小(4kb)</div><div>    只能存字符串</div><div>    客户端存储</div><div><img src="session cookie_files/Image [7].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><span style="font-weight: bold;">session</span>：</div><div>    </div><div>    永久存储</div><div>    不能存对象，要JSON转换</div><div>    服务端存储</div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><b>session 和 cookie 配合 实现登录状态</b></div><div><hr/><div><br/></div></div><div>    localStorage.setItem( )</div><div>    localStorage.getItem( )</div><div>    localStorage.removeItem( )</div><div>    localStorage.clear( )</div><div><img src="session cookie_files/Image [8].png" type="image/png" style="height: auto;"/></div><div>    </div><div><img src="session cookie_files/Image [9].png" type="image/png" style="height: auto;"/></div><div><br/></div><div><br/></div><div><img src="session cookie_files/Image [10].png" type="image/png" style="height: auto;"/></div><div>local storage ：</div><div>本地存储</div><div>有的浏览器存储流量不限制</div><div>关闭浏览器 还有</div><div><br/></div><div>session storage：</div><div>关闭浏览器没有</div><div><br/></div><div><hr/></div><div><br/></div><div><span style="color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;"><b>httponly</b>是用来解决浏览器里javascript访问cookie的问题</span></div><div><a href="http://blog.csdn.net/china_skag/article/details/41484193">http://blog.csdn.net/china_skag/article/details/41484193</a></div><div><span style="font-size: 16px;"><span style="font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(69, 69, 69);"><br/></span></span></span></span></div><div><span style="font-size: 16px;"><span style="font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(69, 69, 69);"><br/></span></span></span></span></div><div><span style="font-size: 16px;"><span style="font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(69, 69, 69);">1、对于PHP5.1以前版本以及PHP4版本的话，则需要通过header函数来变通下了：</span></span></span></span></div><div><ol start="1" style="margin: 0px 0px 24px; padding: 0px; font-weight: 400; box-sizing: border-box; list-style: decimal; border-top: none; border-right: 1px solid rgb(231, 229, 220); border-bottom: none; border-left: none; border-image: initial; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92); font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(255, 255, 255); color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;"> &lt;?php   </span></span></li><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">header(<span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 255); background-color: inherit;">&quot;Set-Cookie: hidden=value; httpOnly&quot;</span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">);   </span></span></li><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(255, 255, 255); color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">?&gt;   </span></li></ol></div><div><span style="font-size: 16px;"><span style="font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(69, 69, 69);"><br/></span></span></span></span></div><div><br/></div><div><span style="color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">2、设置其值为1或者TRUE，来开启全局的Cookie的HttpOnly属性，当然也支持在代码中来开启：</span></div><div><div style="margin: 0px; padding: 0px 0px 0px 45px; font-weight: 400; box-sizing: border-box; color: rgb(69, 69, 69); font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="margin: 0px; padding: 3px 8px 10px 10px; font-weight: normal; box-sizing: border-box; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108); border-right: 1px solid rgb(231, 229, 220);"><b style="box-sizing: border-box;">[php]</b> <a href="http://blog.csdn.net/china_skag/article/details/41484193#" style="color: rgb(103, 149, 181); outline: 0px; margin: 0px 10px 0px 0px; padding: 1px; font-weight: 400; box-sizing: border-box; text-decoration: none; background-image: url(&quot;//csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="view plain">view plain</a><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box;"> <a href="http://blog.csdn.net/china_skag/article/details/41484193#" style="color: rgb(103, 149, 181); outline: 0px; margin: 0px 10px 0px 0px; padding: 1px; font-weight: 400; box-sizing: border-box; text-decoration: none; background-image: url(&quot;//csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="copy">copy</a></span></div></div><ol start="1" style="margin: 0px 0px 24px; padding: 0px; font-weight: 400; box-sizing: border-box; list-style: decimal; border-top: none; border-right: 1px solid rgb(231, 229, 220); border-bottom: none; border-left: none; border-image: initial; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92); font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(255, 255, 255); color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">&lt;?php </span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">ini_set</span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">(</span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 255); background-color: inherit;">&quot;session.cookie_httponly&quot;</span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">, 1);   </span></span></li><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 130, 0); background-color: inherit;">// or session_set_cookie_params(0, NULL, NULL, NULL, TRUE); </span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">  </span></span></li><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(255, 255, 255); color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">?&gt;   </span></li></ol></div><div><br/></div><div><br/></div><div><span style="color: rgb(69, 69, 69); font-family: &quot;PingFang SC&quot;, &quot;Microsoft YaHei&quot;, SimHei, Arial, SimSun; font-size: 16px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; font-weight: 400; letter-spacing: normal; orphans: 2; text-align: start; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; background-color: rgb(255, 255, 255); text-decoration-style: initial; text-decoration-color: initial; display: inline !important; float: none;">3、Cookie操作函数setcookie函数和setrawcookie函数也专门添加了第7个参数来做为HttpOnly的选项，开启方法为</span></div><div><span style="font-size: 16px;"><span style="font-family: 'PingFang SC', 'Microsoft YaHei', SimHei, Arial, SimSun;"><span style="background-color: rgb(255, 255, 255);"><span style="color: rgb(69, 69, 69);"><br/></span></span></span></span></div><div><div style="margin: 0px; padding: 0px 0px 0px 45px; font-weight: 400; box-sizing: border-box; color: rgb(69, 69, 69); font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><div style="margin: 0px; padding: 3px 8px 10px 10px; font-weight: normal; box-sizing: border-box; font-style: normal; font-variant: normal; font-stretch: normal; font-size: 9px; font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; color: silver; background-color: rgb(248, 248, 248); border-left: 3px solid rgb(108, 226, 108); border-right: 1px solid rgb(231, 229, 220);"><b style="box-sizing: border-box;">[php]</b> <a href="http://blog.csdn.net/china_skag/article/details/41484193#" style="color: rgb(103, 149, 181); outline: 0px; margin: 0px 10px 0px 0px; padding: 1px; font-weight: 400; box-sizing: border-box; text-decoration: none; background-image: url(&quot;//csdnimg.cn/release/phoenix/images/ico_plain.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="view plain">view plain</a><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box;"> <a href="http://blog.csdn.net/china_skag/article/details/41484193#" style="color: rgb(103, 149, 181); outline: 0px; margin: 0px 10px 0px 0px; padding: 1px; font-weight: 400; box-sizing: border-box; text-decoration: none; background-image: url(&quot;//csdnimg.cn/release/phoenix/images/ico_copy.gif&quot;); background-position: left top; background-size: initial; background-repeat: no-repeat; background-attachment: initial; background-origin: initial; background-clip: initial; background-color: inherit; border: none; font-size: 9px; display: inline-block; width: 16px; height: 16px; text-indent: -2000px;" title="copy">copy</a></span></div></div><ol start="1" style="margin: 0px 0px 24px; padding: 0px; font-weight: 400; box-sizing: border-box; list-style: decimal; border-top: none; border-right: 1px solid rgb(231, 229, 220); border-bottom: none; border-left: none; border-image: initial; background-color: rgb(255, 255, 255); color: rgb(92, 92, 92); font-family: Consolas, &quot;Courier New&quot;, Courier, mono, serif; font-size: 12px; font-style: normal; font-variant-ligatures: normal; font-variant-caps: normal; letter-spacing: normal; orphans: 2; text-align: left; text-indent: 0px; text-transform: none; white-space: normal; widows: 2; word-spacing: 0px; -webkit-text-stroke-width: 0px; text-decoration-style: initial; text-decoration-color: initial;"><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(255, 255, 255); color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">&lt;?php  </span></span></li><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">setcookie(<span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 255); background-color: inherit;">&quot;abc&quot;</span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 255); background-color: inherit;">&quot;test&quot;</span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">, NULL, NULL, NULL, NULL, TRUE);   </span></span></li><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(255, 255, 255); color: inherit;"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">setrawcookie(<span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 255); background-color: inherit;">&quot;abc&quot;</span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">, </span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 255); background-color: inherit;">&quot;test&quot;</span><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">, NULL, NULL, NULL, NULL, TRUE);  </span></span></li><li style="margin-top: 8px; margin-right: 0px !important; margin-bottom: 0px !important; margin-left: 40px; padding: 0px 3px 0px 10px !important; font-weight: 400; box-sizing: border-box; list-style-type: decimal; list-style-position: outside !important; list-style-image: initial; border-top: none; border-right: none; border-bottom: none; border-left: 3px solid rgb(108, 226, 108); border-image: initial; background-color: rgb(248, 248, 248); color: rgb(92, 92, 92);"><span style="margin: 0px; padding: 0px; font-weight: 400; box-sizing: border-box; border: none; color: rgb(0, 0, 0); background-color: inherit;">?&gt;  </span></li></ol></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 