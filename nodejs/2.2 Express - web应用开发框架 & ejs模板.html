<html>
<head>
  <title>2.2 Express - web应用开发框架 &amp; ejs模板</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/303788 (zh-CN, DDL); Windows/6.1.7601 Service Pack 1 (Win32);"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="924"/>
<h1>2.2 Express - web应用开发框架 &amp; ejs模板</h1>

<div>
<span><div>1、安装环境</div><div>     <span style="color: rgb(167, 69, 0);">方式1：npm install -g express  (web应用开发</span><span style="color: rgb(167, 69, 0); font-weight: bold;">框架</span><span style="color: rgb(167, 69, 0);">)</span></div><div><br/></div><div><span style="color: rgb(65, 0, 125);">     方式2：npm install -g express-generator （创建一个hello world 的应用程序 ，提高开发效率，一个小项目的生成器/</span><span style="color: rgb(65, 0, 125); font-weight: bold;">脚手架</span><span style="color: rgb(65, 0, 125);"> ）</span></div><div><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham, helvetica, arial, sans-serif; line-height: 1.45;">        （1）脚手架:   </span></div><div><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham, helvetica, arial, sans-serif;">                      </span> <span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;"> </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">入口文件：bin/www    </span></div><div><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">  </span> <span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;"> </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">运行：node bin/www    </span></div><div><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">  </span> <span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;"> </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">默认端口：3000    </span></div><div><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">  </span> <span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">    </span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;"> package.jason中</span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">支持运行简单</span><span style="background-color: rgb(255, 250, 165); font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;-evernote-highlight:true;">脚本</span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">：npm run start (可以设置多个，但可以简写只有npm start)</span></div><div><br/></div><div><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham, helvetica, arial, sans-serif;">                    (方式1)</span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">运行express myapp <span style="background-color: rgb(255, 250, 165); font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;-evernote-highlight:true;"> <span style="font-size: 10pt; background-color: rgb(255, 250, 165); color: rgb(65, 0, 125); font-family: gotham;-evernote-highlight:true;">(jade模板) </span></span></span></div><div><span style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">                               新建文件夹myapp   </span></span></div><div><span style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">                       </span></span></div><div><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham, helvetica, arial, sans-serif;">                    (</span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham, helvetica, arial, sans-serif;">方式2</span><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham, helvetica, arial, sans-serif;">) express -e test1706 </span><span style="font-size: 10pt; background-color: rgb(255, 250, 165); color: rgb(65, 0, 125); font-family: gotham, helvetica, arial, sans-serif;-evernote-highlight:true;">（ejs模板引擎）</span></div><div><font color="#41007D" style="font-size: 10pt;"><span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham, helvetica, arial, sans-serif;">                               <span style="font-size: 10pt; color: rgb(65, 0, 125); font-family: gotham;">新建文件夹 test1706   </span></span></font></div><div style="font-size: 14px;"><div><br/></div></div><div style="font-size: 14px;"><span style="font-size: 14px;">2、res.send() //json数据，可以做接口</span></div><div style="font-size: 14px;"><div><span style="font-size: 14px;">     res.jason()</span></div></div><div style="font-size: 14px;"><div><br/></div></div><div style="font-size: 14px;"><span style="font-size: 14px;">3、res.render() //渲染模板页面（jade 和 ejs）</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">//////////////////////////////////////////routes/home.js</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">var express = require(&quot;express&quot;);</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">var router = express.Router();</span></span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">router.get(&quot;/a&quot;,function(req,res,next){</span></span></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">     res.send(&quot;hello home&quot;);   </span><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//给前端返回的数据     可以send json数据，可以做接口   &quot;/a&quot;:配置二级路由   ==&gt; 网址：/home/a   </span></font></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">     </span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">});</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">router.get(&quot;/&quot;,function(req,res,next){</span></span></div><div><br/></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">     res.render('home',{legion:&quot;我的页面&quot;,legion1:&quot;haha&quot;,isTure:ture});   </span><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//渲染jade模板页面 和 ejs模板（html页面）</span></font></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    </span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    var list = [&quot;hah&quot;,&quot;hahahah&quot;,&quot;hahahhaha&quot;]</span></span></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    </span><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">res.render('home',{text:&quot;&lt;b&gt;HAHA&lt;/b&gt;&quot;,isShow:ture,list:list}); </span></font></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">})</span></span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">module.exports = router;</span></span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">////////////////////////////////////////////////app.js</span></span></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">var home = require(&quot;./home&quot;);</span></span></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">app.use(&quot;/home&quot;,home)</span><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//表示只要/home路径，就会匹配home路由     &quot;/home&quot;:一极路由</span></font></div><div><br/></div><div><br/></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">//////////////////////////////////////////views/home.ejs</span></span></div><div><br/></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//所有的静态资源文件都放在public文件夹下(类似 wamp 中的www)</span></span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">&lt;html&gt;</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    &lt;head&gt;</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;link href = &quot;/stylesheets/home.css&quot;&gt;</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    &lt;/head&gt;</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    &lt;body&gt;</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;h1&gt;&lt;%= legion + legion2 %&gt;&lt;/h1&gt;</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;h1&gt;&lt;%= legion2 %&gt;&lt;/h1&gt;</span></span></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        </span><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">&lt;h1&gt;&lt;%= 10+20 %&gt;&lt;/h1&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        <span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">&lt;h1&gt;&lt;%= isTure %&gt;&lt;/h1&gt;</span></span></font></div><div><br/></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;h2&gt;&lt;%- text %&gt;&lt;/h2&gt;<span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//HTML会被浏览器解析</span></span></font></div><div><br/></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">         &lt;h3&gt;&lt;%# 注释 %&gt;&lt;/h3&gt;<span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//注释</span></span></font></div><div><br/></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;% if(isShow){  %&gt;  <span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//if - else</span></span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">            &lt;div&gt;haha&lt;/div&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;% }else{ %&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">            &lt;div&gt;wuwuwu&lt;/div&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;% } %&gt;</span></font></div><div><br/></div><div><br/></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;ul&gt;       <span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//根据数组for循环动态生成li</span></span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">            &lt;% for(var i = 0; i&lt;list.length ; i++) { %&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">                &lt;li&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">                    &lt;%= list[i] %&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">                &lt;/li&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">            &lt;% } %&gt;</span></font></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;/ul&gt;</span></font></div><div><br/></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;%- include(&quot;./header.ejs&quot;)%&gt; <span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//共用（引入模板）</span></span></font></div><div><br/></div><div><font style="font-size: 11pt;"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">        &lt;%- include(&quot;./header.ejs&quot;) ， {isTrue:ture}%&gt;<span style="background-color: rgb(255, 250, 165); font-size: 11pt; color: rgb(51, 51, 51);-evernote-highlight:true;">//传参使得 共用但不同</span></span></font></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    &lt;/body&gt;</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">&lt;/html&gt;</span></span></div><div style="font-size: 12px;"><span style="background-color: rgb(251, 250, 248); font-size: 10pt; color: rgb(51, 51, 51); font-family: 微软雅黑;">////////////////////////////////////////////////////////</span></div><div style="font-size: 12px;"><br/></div></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">2、为什么要用模板？ </span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        -- 后端嵌套模板开发方式 （SSR - server side rending）</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        <span style="font-size: 12pt; background-color: rgb(255, 250, 165); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; color: rgb(51, 51, 51);-evernote-highlight:true;">//&lt;% %&gt;流程控制标签( 写的是if else，for)</span></span></div><div style="font-size: 12px;"><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">    //&lt;%= %&gt;输出标签（原文输出HTML标签 支持表达式、三目运算符）</span></div><div style="font-size: 12px;"><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">    //&lt;%- %&gt;输出标签（HTML标签会被浏览器解析）</span></div><div style="font-size: 12px;"><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">    //&lt;%# %&gt; 注释标签 但不会输出到浏览器后台</span></div><div><span style="font-size: 12pt; background-color: rgb(255, 250, 165); color: rgb(51, 51, 51); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace;-evernote-highlight:true;">    //&lt;%- include('user/show', {user: user}) %&gt; 共用（模板嵌套） 代码复用</span></div><div style="font-size: 14px;"><div><br/></div></div><div style="font-size: 14px;"><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif; line-height: 1.45;">3、开发方式：</span></div><div style="font-size: 14px;"><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        （1）<b>后端渲染模块开发方式</b>（ejs）  -  <span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">后端把页面组装</span></span></div><div><span style="font-size: 14px;">                    a. 做好静态页面，动态效果。</span></div><div><span style="font-size: 14px;">                    b. 把前端代码提供给后端，后端把静态html以及假数据删掉，通过模板进行动态生成html的内容。</span></div><div><span style="font-size: 14px;">                    优点：SEO 搜索引擎优化，</span></div><div><span style="font-size: 14px;">                    缺点：</span></div><div><br/></div></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        （2）<b>前后端分离</b>  -  </span><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif; line-height: 1.45;">在前端中组装页面  (跳转页面location.href)</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">                    a. 做好静态页面。</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">                    b. json模拟，ajax，动态创建页面。</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">                    c. 真实接口数据，前后联调。</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">                    d. 把前端代码提供给后端静态资源文件夹。</span></div><div><br/></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">4、后端如何获取前端的 get post 请求 参数</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        （1）req.query 获取get请求</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        （2）req.body  获取post请求</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        （3）req.params 获取动态路由传来参数</span></div><div style="box-sizing: border-box; padding: 8px; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902);"><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">Router.get(&quot;/:legionid&quot;,function(){</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    console.log(req.params.legionid);</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">    res.render(&quot;detail&quot;);</span></span></div><div><span style="background-color: rgb(251, 250, 248);"><span style="background-color: rgb(251, 250, 248); font-size: 11pt; color: rgb(51, 51, 51);">})</span></span></div></div><div><br/></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">5、ejs跳转页面</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        res.redirect(&quot;/&quot;)；</span></div><div><br/></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">6、express.static (参数 是作为静态资源的文件目录 )</span></div><div><br/></div><div><br/></div><div><br/></div><div><span style="font-size: 14px; background-color: rgb(255, 250, 165); font-family: gotham, helvetica, arial, sans-serif;-evernote-highlight:true;">===================app.js 里模块分析=================</span></div><div><br/></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">1、path模块</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        路径，自动转换字符串，兼容linus和window的环境</span></div><div><br/></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        var path = require(&quot;path&quot;);</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">        path.join(__dirname,'views')  //绝对路径</span></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;"><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image.png" type="image/png" style="font-family: gotham;"/></span></div><div><br/></div><div><font style="font-size: 14px;"><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif; line-height: 18.18181800842285px;">2、favicon模块  设置图标</span></font></div><div>        var favicon = require(&quot;favicon&quot;);</div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [1].png" type="image/png" style="font-size: 9pt;"/></div><div><br/></div><div><br/></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">3、morgan    以统一格式输出log ， 打印一个log , 把用户的每次请求都在控制台输出一次</span></div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [2].png" type="image/png" style="font-size: 9pt;"/></div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [3].png" type="image/png"/></div><div><br/></div><div><br/></div><div>4、cookie   获取前端的cookie，往前端设置cookie</div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [4].png" type="image/png" style="font-size: 9pt;"/></div><div><br/></div><div><br/></div><div><span style="font-size: 14px; font-family: gotham, helvetica, arial, sans-serif;">5、body-parser  通过req.body获取前端post 请求</span></div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [5].png" type="image/png" style="font-family: gotham;"/></div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [6].png" type="image/png"/></div><div><br/></div><div><br/></div><div>6、express.static(静态资源文件目录)  设置静态资源文件夹 （ public不是绝对的）</div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [7].png" type="image/png" style="font-size: 9pt;"/></div><div><br/></div><div><br/></div><div>7、中间件  （ .use 可以理解为注册  过程相当于一个遍历的过程去匹配）</div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [8].png" type="image/png"/></div><div><br/></div><div>如果都没有匹配，那么会：</div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [9].png" type="image/png"/></div><div>next() 表示不停止匹配 继续往下匹配</div><div><br/></div><div><br/></div><div>最终匹配到  判断运行环境是不是开发环境   是的话，运行代码  ， 打印出错误信息</div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [10].png" type="image/png"/></div><div> </div><div><br/></div><div>不是的话  只运行no found    用户看不到错误信息</div><div><img src="2.2 Express - web应用开发框架 & ejs模板_files/Image [11].png" type="image/png"/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></span>
</div></body></html> 